# name: Publish Changed Packages

# on:
#   push:
#     branches:
#       - main

# jobs:
#   publish:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: write
#       id-token: write

#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4
#         with:
#           fetch-depth: 0

#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: 20
#           registry-url: https://registry.npmjs.org/

#       - name: Install dependencies
#         run: npm ci

#       - name: Configure git
#         run: |
#           git config user.name "github-actions[bot]"
#           git config user.email "github-actions[bot]@users.noreply.github.com"

#       # ğŸš€ Bump version cho cÃ¡c package thay Ä‘á»•i
#       - name: Bump versions for changed packages
#         run: |
#           # Náº¿u chÆ°a cÃ³ tag nÃ o, dÃ¹ng --first-release Ä‘á»ƒ trÃ¡nh lá»—i
#           if git tag | grep -q "v"; then
#             echo "ğŸ”„ Existing tags found, running regular version bump..."
#             npx nx release version
#           else
#             echo "ğŸ†• No tags found, running first release setup..."
#             npx nx release version --first-release
#           fi
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

#       # ğŸš€ Publish cÃ¡c package Ä‘Ã£ thay Ä‘á»•i
#       - name: Publish changed packages
#         run: npx nx release publish --yes
#         env:
#           NODE_AUTH_TOKEN: ${{ secrets.NPM_ACCESS_TOKEN }}
#           NPM_CONFIG_PROVENANCE: true

#       # ğŸ·ï¸ Push tag vÃ  commit version má»›i trá»Ÿ láº¡i main
#       - name: Push new tags
#         run: |
#           git push --follow-tags origin main
